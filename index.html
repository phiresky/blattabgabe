<style>
.past {
	color:gray;
}
</style>
<div id=outp>js is disabled</div>
<script src="jquery.min.js"></script>
<script src="moment.min.js"></script>
<script>
var semwoch=14;
function fmt(integer,len) {
	if(len===1) return ""+integer;
	if(integer<10) return "0"+integer;
	else return ""+integer;
}
var uebs={
	"RO":{begin:moment("2014-04-28 13:15"),count:semwoch,interval:7,url:"http://algo2.iti.kit.edu/documents/algo1-2014/blatt_{2}.pdf"},
	"Algo":{begin:moment("2014-04-25 12:45"),count:semwoch,interval:7,url:"http://ti.itec.uka.de/TI-2/Uebungen/blatt{2}.pdf"},
	"SWT":{begin:moment("2014-04-29 12:00"),count:semwoch/2,interval:14,url:"http://svn.ipd.kit.edu/lehre/vorlesung/SWT1/SS14/stud/Uebung/{1}/"},
	"HM":{begin:moment("2014-04-23 13:30"),count:semwoch,interval:7,url:"http://www.math.kit.edu/iana3/lehre/hm2inf2014s/media/blatt_{1}.pdf"}
}
var todo=[];
var overview="";
for(var ueb in uebs) {
	var u = uebs[ueb];
	var str="<p><h2>"+ueb+"</h2><ul>";
	var date=u.begin;
	for(var i = 0; i < u.count; i++) {
		var padding=parseInt(u.url.match(/\{(\d)\}/)[1]);
		var num=fmt(i+1,padding);
		var url=u.url.replace(/\{\d\}/,num);
		var past=date.isBefore(moment())?"past":"";
		var until=date.fromNow();
		var li="<li class='"+past+"'><a href='"+url+"'>Blatt "+num+"</a>: "+date.format("YYYY-MM-DD (dd) HH:mm")+" "+until.toString();
		str+=li;
		date.add('days', u.interval);
		if(past==="") {
			todo.push({li:li,date:moment(date)});
			break;
		}
	}
	str+="</ul></p>";
	overview+=str;
}
$("#overview").html(overview);
todo.sort(function(a,b){return a.date.diff(b.date)});
</script>
